{% extends "layout.html" %}
{% set sidebars = sidebars + ["demo_sidebar.html"] %}

{% block extrahead %}
{{ super() }}
<link rel="stylesheet" type="text/css" href="{{ pathto("_static/demo.css", 1) }}">
{% endblock %}

{% block htmltitle %}<title>Demo{{ titlesuffix }}</title>{% endblock %}

{% block body %}
{{ body }}

<h1>Demo - Try it out!</h1>
<p>The highlighting here is performed in-browser using
    a WebAssembly translation of the latest Pygments master branch, courtesy of
    <a href="https://github.com/iodide-project/pyodide">Pyodide</a>.</p>
<p>Your content is neither sent over the web nor stored anywhere.</p>

<div id="try">
    <h2>Enter code and select a language</h2>
    <form>
        <p>
            <label>Language
                <select id="lang">
                    <option value="">Guess the lexer</option>
                    {% for name, info, _, _ in lexers %}
                        <option value="{{info.0}}">{{name}}</option>
                    {% endfor %}
                </select>
            </label>
            <span id=guessed-lexer></span>
        </p>
        <p>
            <label>Upload a file here:
                <input type="file" id="file"> or enter code below:
            </label>
        </p>
	    <p>
            <textarea id="code" rows="1" cols="60"></textarea>
        </p>
	<div style="display: flex; gap: 1em;">
        <label>Style
            <select id="style">
                <optgroup label="Good contrast">
                {% for style in styles_aa %}
                    <option>{{style.name}}</option>
                {% endfor %}
                </optgroup>
                <optgroup label="Suboptimal contrast">
                {% for style in styles_sub_aa %}
                    <option>{{style.name}}</option>
                {% endfor %}
                </optgroup>
            </select>
        </label>
        <div class=flex-grow-1></div>
        <button type="button" onclick="highlight()" id="hlbtn" disabled>Loading Python...</button>
	    <input type="reset" value="Reset">
    </div>
    </form>
</div>

<div id="loading" hidden>
    <img src="{{ pathto("_static/spinner.gif", 1) }}" style="vertical-align: middle">
    <span id="loading-text">loading Python...</span>
</div>

<style id=css-style></style>

<div id="hlcode"></div>

<div id="code-header" hidden>
    <div class=flex-grow-1></div>
    <button onclick="download_code()">Download</button>
    <a id="copylink" role="button">Copy link</a>
    <span hidden id="uri-too-long">(Copy link unavailable because code too long)</span>
</div>
<script type="text/javascript" src="{{ pathto("_static/demo.js", 1) }}"></script>
{% endblock %}
